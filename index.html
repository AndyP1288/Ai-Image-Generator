<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Image Generator</title>
<style>
body { background:#111; color:#fff; font-family:sans-serif; text-align:center; padding:2em; }
h1{margin-bottom:1em;}
input{width:60%;padding:.5em;font-size:1em;border-radius:4px;border:none;margin-bottom:1em;}
button{padding:.6em 1.2em;font-size:1em;margin-left:.5em;border:none;border-radius:4px;background:#4CAF50;color:#fff;cursor:pointer;}
button:hover{background:#45a049;}
#result{margin-top:2em;}
img{max-width:90%;border:2px solid #fff;border-radius:4px;}
.download-btn{margin-top:.5em;padding:.5em 1em;background:#2196F3;color:#fff;border:none;border-radius:3px;cursor:pointer;}
.download-btn:hover{background:#1976D2;}
</style>
</head>
<body>
<h1>AI Image Generator</h1>
<div>
<input type="text" id="promptInput" placeholder="Enter your prompt…">
<button id="generateBtn">Generate</button>
</div>
<div id="result"></div>

<script>
const btn = document.getElementById('generateBtn');
const promptInput = document.getElementById('promptInput');
const resultDiv = document.getElementById('result');

btn.addEventListener('click', async () => {
  const prompt = promptInput.value.trim();
  if (!prompt) { alert('Please enter a prompt!'); return; }

  resultDiv.innerHTML = '<p>Generating image…</p>';

  try {
    const res = await fetch('/generate', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ prompt })
    });
    const data = await res.json();
    if (data.error) {
      resultDiv.innerHTML = `<p>Error: ${data.error}</p>`;
      return;
    }

    resultDiv.innerHTML = '';
    const img = document.createElement('img');
    img.src = data.image;
    img.alt = 'Generated image';
    const downloadBtn = document.createElement('button');
    downloadBtn.className = 'download-btn';
    downloadBtn.textContent = 'Download';
    downloadBtn.onclick = () => {
      const link = document.createElement('a');
      link.href = data.image;
      link.download = 'generated.png';
      link.click();
    };

    resultDiv.appendChild(img);
    resultDiv.appendChild(downloadBtn);
  } catch (err) {
    console.error(err);
    resultDiv.innerHTML = `<p>Error: ${err.message}</p>`;
  }
});
</script>
</body>
</html>
